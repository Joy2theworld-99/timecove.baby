<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Timecove Monitor: Lyo & Lya</title>
<style>
  :root{
    --bg:#0e0f11;
    --card:#16181b;
    --text:#f4f6f8;
    --muted:#a4acb5;

    /* Baseline moods */
    --calm:#27d4d0;         /* teal */
    --sleep:#6f78ff;        /* indigo */

    /* Need colors */
    --hungry:#ff4d4d;       /* red */
    --tired:#ffb020;        /* amber */
    --sick:#7fff3c;         /* puke green */
    --play:#4d7dff;         /* blue-violet */
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Helvetica,Arial,sans-serif;
    display:flex; flex-direction:column; align-items:center; gap:26px; padding:26px;
  }
  h1{margin:0 0 8px; font-weight:900; letter-spacing:.5px}

  .row{
    display:flex; gap:36px; flex-wrap:wrap; justify-content:center; width:100%;
  }
  .monitor{
    width:420px; max-width:94vw; background:var(--card);
    border-radius:26px; padding:26px 26px 18px;
    box-shadow:0 16px 40px rgba(0,0,0,.4), inset 0 0 0 1px rgba(255,255,255,.03);
  }
  .name{font-size:28px; font-weight:900; text-align:center; margin-bottom:8px}

  .stage{
    position:relative; width:340px; height:340px; margin:4px auto 10px;
    display:grid; place-items:center;
  }
  .avatar{
    width:200px; height:200px; border-radius:50%;
    background:#0d0e10 center/cover no-repeat;
    position:relative; z-index:3;
    box-shadow:0 10px 24px rgba(0,0,0,.35) inset, 0 0 0 1px rgba(255,255,255,.04);
  }

  /* SVG where auras live */
  svg.halo{ position:absolute; inset:0; overflow:visible; z-index:2 }

  /* Baseline mood ring (under needs) */
  .baseline{
    fill:none; stroke-width:14; opacity:.22; transform-origin:170px 170px;
    filter: drop-shadow(0 0 14px currentColor) drop-shadow(0 0 26px currentColor);
  }
  .baseline.calm{ color:var(--calm); stroke:var(--calm); animation:breathe 6.5s ease-in-out infinite }
  .baseline.sleep{ color:var(--sleep); stroke:var(--sleep); opacity:.18; animation:breath-sleep 8.5s ease-in-out infinite }

  @keyframes breathe{
    0%,100%{ transform:scale(1); opacity:.22 }
    50%    { transform:scale(1.06); opacity:.32 }
  }
  @keyframes breath-sleep{
    0%,100%{ transform:scale(1); opacity:.18 }
    50%    { transform:scale(1.04); opacity:.26 }
  }

  /* Need rings (stack above baseline) */
  .ring{
    fill:none; stroke-width:12; transform-origin:170px 170px;
    filter: drop-shadow(0 0 10px currentColor) drop-shadow(0 0 22px currentColor);
    opacity:1; transition:opacity .2s ease;
  }
  .cooldown{ animation:cooldown .9s ease forwards }
  @keyframes cooldown{ to{ opacity:0; transform:scale(.88) } }

  .controls{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:12px }

  .pill{
    border:0; color:#fff; font-weight:800; border-radius:999px;
    padding:12px 16px; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.35);
    transition:transform .06s ease, filter .2s ease;
  }
  .pill:active{ transform:translateY(1px) }

  /* Resolve buttons for needs (shown only when active) */
  .resolve{ display:none }
  /* Mood toggles (always shown) */
  .toggle{ background:#2b2e35; color:var(--text) }
  .toggle.active.calm{ background:var(--calm) }
  .toggle.active.sleep{ background:var(--sleep) }

  .hint{ text-align:center; color:var(--muted); font-size:13px; margin-top:8px }
</style>
</head>
<body>

<h1>Timecove Monitor: Lyo & Lya</h1>

<div class="row">
  <!-- LYO -->
  <section class="monitor" id="lyo-card">
    <div class="name">Lyo</div>
    <div class="stage">
      <svg class="halo" viewBox="0 0 340 340" aria-hidden="true">
        <!-- baseline mood ring -->
        <circle id="lyo-base" class="baseline calm" cx="170" cy="170" r="130"/>
        <!-- need rings go here -->
        <g id="lyo-rings"></g>
      </svg>
      <div id="lyo-avatar" class="avatar"
           style="background-image:url('Lyo_Glyph_Clear.png');"></div>
    </div>
    <div class="controls" id="lyo-controls"></div>
    <div class="controls" id="lyo-mood"></div>
    <div class="hint">Needs stack as rings; resolving returns to Calm. Toggle Sleeping when they nod off.</div>
  </section>

  <!-- LYA -->
  <section class="monitor" id="lya-card">
    <div class="name">Lya</div>
    <div class="stage">
      <svg class="halo" viewBox="0 0 340 340" aria-hidden="true">
        <circle id="lya-base" class="baseline calm" cx="170" cy="170" r="130"/>
        <g id="lya-rings"></g>
      </svg>
      <div id="lya-avatar" class="avatar"
           style="background-image:url('Lya_Glyph_Clear.png');"></div>
    </div>
    <div class="controls" id="lya-controls"></div>
    <div class="controls" id="lya-mood"></div>
    <div class="hint">Needs persist until resolved; calm/sleep auras keep you informed.</div>
  </section>
</div>

<script>
/* ---- color map for needs ---- */
const NEED_COLOR = {
  Hungry:  getComputedStyle(document.documentElement).getPropertyValue('--hungry').trim(),
  Tired:   getComputedStyle(document.documentElement).getPropertyValue('--tired').trim(),
  Sick:    getComputedStyle(document.documentElement).getPropertyValue('--sick').trim(),
  Play:    getComputedStyle(document.documentElement).getPropertyValue('--play').trim()
};

const MOODS = { calm:'calm', sleeping:'sleep' };

/* Initial demo state:
   - Lyo has one need (Tired) and is otherwise Calm
   - Lya is Calm with no needs */
const model = {
  lyo:  { mood:'calm', needs:['Tired'] },
  lya:  { mood:'calm', needs:[] }
};

function $(id){ return document.getElementById(id); }

function renderChild(id){
  const { mood, needs } = model[id];

  // Baseline mood ring
  const base = $(id+'-base');
  base.classList.toggle('calm', mood==='calm');
  base.classList.toggle('sleep', mood==='sleeping');

  // Need rings
  const ringsG = $(id+'-rings'); ringsG.innerHTML = '';
  if(needs && needs.length){
    needs.forEach((need, idx)=>{
      const color = NEED_COLOR[need] || '#9aa';
      const r = 130 - idx*16; // concentric
      const circle = document.createElementNS('http://www.w3.org/2000/svg','circle');
      circle.setAttribute('cx','170'); circle.setAttribute('cy','170'); circle.setAttribute('r', String(r));
      circle.setAttribute('class','ring');
      circle.setAttribute('style',`color:${color}; stroke:${color}`);
      ringsG.appendChild(circle);
    });
  }

  // Resolve buttons (show only for active needs)
  const controls = $(id+'-controls'); controls.innerHTML='';
  (needs||[]).forEach((need)=>{
    const btn = document.createElement('button');
    btn.className = 'pill resolve';
    btn.style.display='inline-block';
    btn.style.backgroundColor = NEED_COLOR[need] || '#555';
    btn.textContent = `Resolve ${need}`;
    btn.onclick = ()=>{
      // animate topmost matching ring out; then remove from model
      const rings = ringsG.querySelectorAll('.ring');
      // find the outermost ring that matches this need's color
      for(let i=rings.length-1;i>=0;i--){
        const ring = rings[i];
        const col = ring.style.stroke || ring.getAttribute('stroke');
        if(col === (NEED_COLOR[need] || '#555')){
          ring.classList.add('cooldown');
          break;
        }
      }
      // remove from model after cooldown
      setTimeout(()=>{
        const ix = model[id].needs.indexOf(need);
        if(ix>-1) model[id].needs.splice(ix,1);
        // after resolving, go to Calm (unless user had set Sleeping)
        if(model[id].mood!=='sleeping') model[id].mood='calm';
        renderChild(id);
      }, 900);
    };
    controls.appendChild(btn);
  });

  // Mood toggles
  const moodRow = $(id+'-mood'); moodRow.innerHTML='';
  const calmBtn = document.createElement('button');
  calmBtn.className = 'pill toggle ' + (mood==='calm' ? 'active calm':'');
  calmBtn.textContent = 'Set Calm';
  calmBtn.onclick = ()=>{ model[id].mood='calm'; renderChild(id); };

  const sleepBtn = document.createElement('button');
  sleepBtn.className = 'pill toggle ' + (mood==='sleeping' ? 'active sleep':'');
  sleepBtn.textContent = 'Set Sleeping';
  sleepBtn.onclick = ()=>{ model[id].mood='sleeping'; renderChild(id); };

  moodRow.appendChild(calmBtn);
  moodRow.appendChild(sleepBtn);
}

// Initial paint
renderChild('lyo');
renderChild('lya');

/* ---------- HOW TO FEED FROM “VIRTUAL LIVE” DATA ----------
   Update model.lyo / model.lya and call renderChild('lyo') / renderChild('lya').

   Example:
     model.lya.needs.push('Hungry');
     renderChild('lya');

   Or toggle sleeping:
     model.lyo.mood = 'sleeping';
     renderChild('lyo');
------------------------------------------------------------ */
</script>
</body>
</html>

