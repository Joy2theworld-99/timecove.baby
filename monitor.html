<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Timecove Monitor</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
    }
    .card {
      background: #1c1c1c;
      padding: 1.5rem;
      border-radius: 15px;
      width: 300px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.05);
    }
    .card img {
      width: 100px;
      filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.25));
    }
    .states button {
      margin: 0.25rem;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      color: #fff;
      cursor: pointer;
    }
    .calm { background: #2ec4b6; }
    .alert { background: #e63946; }
    .dreaming { background: #7b2cbf; }
    .sleeping { background: #3a506b; }
    .feed-btn {
      margin-top: 1rem;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 10px;
      border: none;
      cursor: pointer;
    }
    .log {
      margin-top: 1rem;
      font-size: 0.85rem;
      background: #222;
      padding: 0.75rem;
      border-radius: 8px;
    }
    .aura {
      transition: filter 0.5s;
    }
    @media (max-width: 700px) {
      .card {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <h1>Timecove Monitor: Lyo & Lya</h1>
  <div class="container">
    <div class="card" id="lyoCard">
      <h2>Lyo</h2>
      <img id="lyoAura" src="Lyo_Glyph_Clear.png" class="aura" alt="Lyo Pebble">
      <div class="states">
        <button class="calm" onclick="setState('lyo', 'calm')">Calm</button>
        <button class="alert" onclick="setState('lyo', 'alert')">Alert</button>
        <button class="dreaming" onclick="setState('lyo', 'dreaming')">Dreaming</button>
        <button class="sleeping" onclick="setState('lyo', 'sleeping')">Sleeping</button>
      </div>
      <button class="feed-btn" onclick="feed('lyo')">Feed Lyo (Dreammilk)</button>
      <p id="lyoCooldown"></p>
      <div class="log" id="lyoLog"></div>
    </div>

    <div class="card" id="lyaCard">
      <h2>Lya</h2>
      <img id="lyaAura" src="Lya_Glyph_Clear.png" class="aura" alt="Lya Pebble">
      <div class="states">
        <button class="calm" onclick="setState('lya', 'calm')">Calm</button>
        <button class="alert" onclick="setState('lya', 'alert')">Alert</button>
        <button class="dreaming" onclick="setState('lya', 'dreaming')">Dreaming</button>
        <button class="sleeping" onclick="setState('lya', 'sleeping')">Sleeping</button>
      </div>
      <button class="feed-btn" onclick="feed('lya')">Feed Lya (Dreammilk)</button>
      <p id="lyaCooldown"></p>
      <div class="log" id="lyaLog"></div>
    </div>
  </div>

  <script>
    const FEED_INTERVAL = 6 * 60 * 60 * 1000; // 6 hours in ms

    function setState(twin, state) {
      localStorage.setItem(`${twin}State`, state);
      updateAura(twin);
    }

    function updateAura(twin) {
      const state = localStorage.getItem(`${twin}State`) || 'calm';
      const img = document.getElementById(`${twin}Aura`);
      const filters = {
        calm: 'drop-shadow(0 0 10px #2ec4b6)',
        alert: 'drop-shadow(0 0 10px #e63946)',
        dreaming: 'drop-shadow(0 0 10px #7b2cbf)',
        sleeping: 'drop-shadow(0 0 10px #3a506b)',
      };
      img.style.filter = filters[state];
    }

    function feed(twin) {
      const now = new Date().getTime();
      localStorage.setItem(`${twin}LastFed`, now);
      logFeeding(twin, now);
      updateCooldown(twin);
    }

    function logFeeding(twin, timestamp) {
      const log = document.getElementById(`${twin}Log`);
      const time = new Date(timestamp).toLocaleTimeString();
      log.textContent = `${time} â€” Fed with Dreammilk`;
    }

    function updateCooldown(twin) {
      const lastFed = parseInt(localStorage.getItem(`${twin}LastFed`) || 0);
      const now = new Date().getTime();
      const diff = FEED_INTERVAL - (now - lastFed);
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

      const cooldown = document.getElementById(`${twin}Cooldown`);
      if (diff > 0) {
        cooldown.textContent = `Next feeding in ${hours}h ${minutes}m`;
      } else {
        cooldown.textContent = `Ready to feed!`;
      }
    }

    function loadTwin(twin) {
      updateAura(twin);
      updateCooldown(twin);
      const lastFed = parseInt(localStorage.getItem(`${twin}LastFed`) || 0);
      if (lastFed) logFeeding(twin, lastFed);
    }

    // Initial load + refresh every minute
    ['lyo', 'lya'].forEach(loadTwin);
    setInterval(() => {
      ['lyo', 'lya'].forEach(updateCooldown);
    }, 60000);
  </script>
</body>
</html>

